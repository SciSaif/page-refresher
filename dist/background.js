({69:function(){var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{a(o.next(e))}catch(e){i(e)}}function s(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}a((o=o.apply(e,t||[])).next())}))};let t,n=!1;function o(o){return e(this,void 0,void 0,(function*(){console.log("in refresh page",o);const e=yield chrome.scripting.executeScript({target:{tabId:o.id},func:()=>!!document.querySelector(".sc-kMizLa")});chrome.runtime.lastError?console.error(chrome.runtime.lastError):e[0].result?(console.log("refreshing"),chrome.tabs.reload(o.id)):(clearTimeout(t),chrome.notifications.create("",{title:"Found a question for you!",message:"There is a question waiting for you!",iconUrl:"/images/chegg-48.png",type:"basic"}),n=!1)}))}console.log("Chegg Auto Refresh is running"),chrome.tabs.onActivated.addListener((function(t){var r;return e(this,void 0,void 0,(function*(){if(!n)return;let[e]=yield chrome.tabs.query({active:!0,currentWindow:!0});e&&(null===(r=e.url)||void 0===r?void 0:r.startsWith("https://expert.chegg.com/expertqna"))&&o(e)}))})),chrome.tabs.onUpdated.addListener((function(t,r,i){var c;return e(this,void 0,void 0,(function*(){n&&(null===(c=i.url)||void 0===c?void 0:c.startsWith("https://expert.chegg.com/expertqna"))&&"complete"===r.status&&setTimeout((()=>{o(i)}),1e4)}))})),chrome.storage.sync.get("enabled",(({enabled:e})=>{e=!!e})),chrome.runtime.onMessage.addListener((function(t,r,i){return e(this,void 0,void 0,(function*(){if(1==t.action){console.log("enabled"),n=!0;const[e]=yield chrome.tabs.query({active:!0,currentWindow:!0});if(!e)return;o(e)}else console.log("disabled"),n=!1;i({result:"success"})}))}))}})[69]();
//# sourceMappingURL=background.js.map